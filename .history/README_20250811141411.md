# QProcess - Dual Mode OCR System

## 🎯 Tổng quan

QProcess là hệ thống OCR hỗ trợ **2 modes** xử lý:
- **Mode 1**: Vertex AI OCR (Google Gemini 2.5-pro)
- **Mode 2**: Mathpix API OCR

## 🚀 Tính năng

### Mode 1: Vertex AI (Gemini)
- **✨ Ưu điểm**: Hiểu ngữ cảnh sâu, xử lý đề thi chuyên sâu
- **🎯 Phù hợp**: Đề thi phức tạp, nội dung học thuật
- **🔧 Tùy chọn**: Prompt engineering chi tiết cho đề thi

### Mode 2: Mathpix API  
- **✨ Ưu điểm**: Chuyên sâu LaTeX, công thức toán học
- **🎯 Phù hợp**: Tài liệu toán học, công thức phức tạp
- **🔧 Tùy chọn**: Tối ưu cho math content

## 📁 Cấu trúc Project

```
QProcess/
├── main.py                    # File chính - chọn mode
├── test_mathpix_mode.py       # Test riêng Mode 2
├── test_mathpix_image.py      # Test API Mathpix
├── config/
│   ├── app_config.py          # Cấu hình tổng
│   ├── vertex_ai_config.py    # Cấu hình Vertex AI
│   ├── mathpix_config.py      # Cấu hình Mathpix
│   └── mathpix_docs.txt       # Documentation
├── processors/
│   └── exam_processor.py      # Xử lý template lời giải
└── data/
    ├── input/                 # Ảnh input
    └── output/                # Kết quả .md
```

## ⚙️ Cấu hình Environment

Tạo file `.env` với nội dung:

```env
# Vertex AI (Mode 1)
PROJECT_ID=your-google-project-id
TYPE=service_account
PRIVATE_KEY_ID=your-private-key-id
PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
CLIENT_EMAIL=your-service-account@project.iam.gserviceaccount.com
CLIENT_ID=your-client-id
AUTH_URI=https://accounts.google.com/o/oauth2/auth
TOKEN_URI=https://oauth2.googleapis.com/token
AUTH_PROVIDER_X509_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
CLIENT_X509_CERT_URL=your-cert-url

# Mathpix API (Mode 2)
MATHPIX_APP_ID=your-mathpix-app-id
MATHPIX_APP_KEY=your-mathpix-app-key
```

## 🔧 Cách sử dụng

### 1. Chạy chương trình chính
```bash
python main.py
```

Chọn mode:
- `1`: Vertex AI OCR
- `2`: Mathpix API OCR  
- `0`: Thoát

### ⚡ Multiprocessing
- Xử lý nhiều ảnh đồng thời
- Tự động phát hiện số CPU cores
- Progress tracking real-time

### 🔄 Error Handling
- Retry logic với exponential backoff
- Graceful degradation
- Chi tiết error reporting

### 🎯 Smart Detection
- Bôi đậm tiêu đề và câu hỏi
- Xử lý LaTeX math

